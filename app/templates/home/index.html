{% extends 'base.html' %} 

{% load static %}

{% block title %}Cardápio{% endblock %} 

{% block content %}
<h2 style='width: 100%; text-align: center;'>Nossos pratos</h2>
<section id="index-view">
  {% for p in pratos %}
    <div class="card">
      <div class="card-img" style="background-image: url('{{ p.image }}');"></div>
      <div class="card-data">
        <h5 class="card-data-title">{{ p.name }}</h5>
        <p class="card-data-desc">{{ p.desc }}</p>
        <p class="card-data-ingredients">
          <strong>Ingredientes: </strong><br>{{ p.ingredients }}
        </p>
      </div>
      <div class="card-div-btn">
        <button class="card-btn pulse modal-trigger" style="z-index: 100;" data-target="modal{{p.id}}"><span class="material-icons" style="font-size: 48px;">shopping_basket</span></button>
      </div>
    </div>

    <div id="modal{{p.id}}" class="modal">
      <div class="modal-content">
        <h4>{{ p.name }}</h4>
        <div class="card-img" style="background-image: url('{{ p.image }}'); width: 100%; height: 100px; border-radius: 5px;"></div>
        <div class="card-data" style="width: 100%; display: flex; align-items: center; flex-direction: column;">
          <h6 style="margin-top: 24px;"><b>Informações adicionais</b></h6>
          <div style="display: flex;">
            <div class="input-field" style="width: 150px; margin-right: 16px;">
              <input type="number" name="qtd" id="qtd" v-model="qtd">
              <label for="qtd">Quantidade</label>
            </div>
            <div class="input-field" style="width: 150px;">            
              <p>
                <label style="display: flex; align-items: center;">
                  <input type="checkbox" class="filled-in" v-model="maionese">
                  <span>Maionese?</span>
                </label>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button v-on:click="pedidos({{ p.id }})" class="btn modal-close">Adicionar ao pedido</button>
      </div>
    </div>

    {% endfor %}
    
  <a class="card-btn modal-trigger" style="z-index: 100;" data-target="modal-carrinho"><span class="material-icons" style="font-size: 48px;">shopping_basket</span></a>
  <!-- Modal Structure -->
  <div id="modal-carrinho" class="modal">
    <form action='/pedidos/addpedido/' method="POST">
      {% csrf_token %}
      <div class="modal-content">
        
        <h4>Seu Pedido</h4>
        <div v-for="ped in pedido">
          <div style="display: flex; flex-wrap: wrap;">
            <div class="img-pedido" :style="{'background-image': 'url('+ped.image+')'}"></div>
            <div style="display: flex; flex-direction: column;">
              <h6><b>Nome:</b> [[ ped.title ]]</h6>
              <h6><b>Quantidade:</b> [[ ped.qtd ]]</h6>
              <h6 v-if="ped.maionese == true"><b>Maionese?</b> Sim</h6>
              <h6 v-else><b>Maionese?</b> Não</h6>
            </div>
          </div>
          <hr>
        </div>
        <div class="card-data">
          <h6 class="card-data-title"><strong>{{ p.name }}</strong></h6>
        </div>
        <div style="display: flex; align-items: center;">
          <div class="input-field" style="width: 30%; margin-right: 10%;  ">
            <input type="text" name="cpf" id="cpf" maxlength="14" v-on:keydown="cpfMaskDown($event)" v-on:keyup="cpfMaskUp($event)">
            <label for="cpf">CPF</label>
          </div>
          <div class="input-field" style="width: 60%;">
            <input type="text" name="name" id="name" maxlength="30">
            <label for="Nome">Nome</label>
          </div>
        </div>
        <div class="input-field">
          <input type="text" name="rua" id="rua" maxlength="50">
          <label for="rua">Rua/Bairro/Nº</label>
        </div>
      </div>
      <div class="modal-footer">
        <a :href="link+linkFone+linkText" target="_blank" class="modal-close" style="z-index: 100;" data-target="modal1">Adicionar ao pedido</a>
      </div>
    </form>
  </div>
</section>
{% endblock %}
{% block script %}
  <script src="{% static 'js/components/index.js' %}"></script>
{% endblock %}
